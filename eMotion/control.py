import serial
import numpy as np
import time

ser = serial.Serial(3, 9600)


 # {0xBA,0x01,0xEA,0x60,0x01,0x03,0x02,0x30,0x00,0x63,0x9C,0x00,0x0A,0x02,0x26,0xA1,0xFE}
#define DEFAULT_BACKWARD_BYTE {0xBA,0x01,0xEA,0x60,0x01,0x03,0x01,0x30,0x00,0x63,0x9C,0x00,0x0A,0x02,0x26,0xA1,0xFE}
#define DEFAULT_STOP_BYTE     {0xBA,0x01,0xEA,0x60,0x01,0x03,0x03,0x30,0x00,0x63,0x9C,0x00,0x0A,0x02,0x26,0xA1,0xFE}

def forawrd(deviceID):
    data = [0xBA,0x01,0x0A,0x60,0x01,0x03,0x02,0x30,0x00,0x63,0x9C,0x00,0x0A,0x02,0x26,0xA1,0xFE]
    data[4] = deviceID
    data[-2] = crc(data[:15])
    ser.write(data)

def backward(deviceID):
    data = [0xBA,0x01,0x0A,0x60,0x01,0x03,0x01,0x30,0x00,0x63,0x9C,0x00,0x0A,0x02,0x26,0xA1,0xFE]
    data[4] = deviceID
    data[-2] = crc(data[:15])
    ser.write(data)

def stop(deviceID):
    data = [0xBA,0x01,0x0A,0x60,0x01,0x03,0x03,0x30,0x00,0x63,0x9C,0x00,0x0A,0x02,0x26,0xA1,0xFE]
    data[4] = deviceID
    data[-2] = crc(data[:15])
    ser.write(data)

def crc(bytes):
    r = 0
    for b in bytes:
        r ^= b
    return r


if __name__ == '__main__':
    for i in range(2,5):
        forawrd(i)

    print 'forward'
    for i in range(2,5):
        print repr(ser.read())


    for i in range(2,5):
        backward(i)
    print 'backward'
    for i in range(2,5):
        print repr(ser.read())

    print 'stop'
    for i in range(2,5):
        stop(i)

    for i in range(2,5):
        print repr(ser.read())